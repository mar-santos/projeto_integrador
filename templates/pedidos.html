{% extends 'base.html' %}

{% block restrito %}
<li class="nav-item">
    <a class="nav-link" href="{{ url_for('cadastrar_pedido') }}">Cadastrar Pedido</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="{{ url_for('listar_pedidos') }}">Listar Pedidos</a>
</li>
<li class="nav-item">
    <a class="nav-link" href="{{ url_for('logout') }}">Sair</a>
</li>
{% endblock %}

{% block pesquisa %}
<form class="d-flex" role="search" action="{{url_for('listar_pedidos')}}" method="post">
    <input class="form-control me-2" type="search" aria-label="Search" name="pesquisa">
    <button class="btn btn-outline-success" type="submit">Pesquisar</button>
</form>
{% endblock %}




{% block main %}
<div class="container">
    <br>
    <div>
        <h1>Lista Pedidos</h1>
    </div>
    
    <table class="table table-striped table-hover table-sm">
        <thead>
            <tr>
                <th>Data</th>
                <th>Nome</th>
                <th>Endereço</th>
                <th>Telefone</th>
                <th>Serviço</th>
                <th>Valor</th>
                <th>Editar</th>
                <th>Apagar</th>
            </tr>
        </thead>
        <tbody class="table-group-divider">
            {% for pedido in pedidos %}
            <tr>
                <td>{{ pedido.data_pedido }}</td>
                <td>{{ pedido.nome }}</td>
                <td>{{ pedido.endereco }}</td>
                <td>{{ pedido.telefone }}</td>
                <td>{{ pedido.servico }}</td>
                <td>{{ pedido.valor }}</td>
                <td><a href="{{ url_for('editar_pedido', id_pedido=pedido.id_pedido)}}" class="btn btn-secondary btn-sm">Editar</a>
                </td>
                <td><a href="{{ url_for('deletar_pedido', id_pedido=pedido.id_pedido)}}"
                        onclick="return confirm('Deseja realmente deletar esse produto?')"
                        class="btn btn-danger btn-sm">Deletar</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}